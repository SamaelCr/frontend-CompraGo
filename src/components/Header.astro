---
const navLinks = [
  { href: "/", label: "Dashboard" },
  { href: "/compras/nueva", label: "Nueva Orden" },
  { href: "/compras/consultas", label: "Consultas" },
  // ===== "Administración" ahora es un objeto con un submenú desplegable =====
  { 
    label: "Administración", 
    subLinks: [
      { href: "/administracion/proveedores", label: "Gestionar Proveedores" },
      { href: "/administracion/unidades", label: "Gestionar Unidades" },
      { href: "/administracion/cierre-anual", label: "Cierre Anual" },
    ]
  },
];
---
<header class="bg-white shadow-md sticky top-0 z-50">
  <nav class="container mx-auto px-4 md:px-8 py-3 flex justify-between items-center">
    <div class="text-xl font-bold text-slate-900">
      <a href="/">Sistema de Compras</a>
    </div>

    {/* Menú de Escritorio: visible a partir de `md` */}
    <ul class="hidden md:flex items-center space-x-6">
      {navLinks.map(link => (
        <li class="relative group"> {/* Añadimos relative y group para el dropdown */}
          {link.href ? (
            <a href={link.href} class="text-slate-600 hover:text-blue-600 font-medium transition-colors">
              {link.label}
            </a>
          ) : (
            <>
              <button class="text-slate-600 hover:text-blue-600 font-medium transition-colors flex items-center cursor-default">
                {link.label}
                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
              </button>
              {link.subLinks && (
                <ul class="absolute left-0 mt-2 w-56 bg-white shadow-lg rounded-md opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-10">
                  {link.subLinks.map(sub => (
                    <li>
                      <a href={sub.href} class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 hover:text-blue-600">
                        {sub.label}
                      </a>
                    </li>
                  ))}
                </ul>
              )}
            </>
          )}
        </li>
      ))}
    </ul>

    {/* Menú de Hamburguesa (Móvil): oculto a partir de `md` */}
    <div class="md:hidden">
      <button id="menu-btn" class="hamburger focus:outline-none">
        <span class="hamburger-top"></span>
        <span class="hamburger-middle"></span>
        <span class="hamburger-bottom"></span>
      </button>
    </div>
  </nav>

  <!-- Menú Móvil Desplegable (También modificado para submenús) -->
  <div id="menu" class="hidden md:hidden">
    <ul class="flex flex-col items-center py-4 space-y-2 bg-white border-t border-slate-200">
      {navLinks.map(link => (
        <li>
          {link.href ? (
            <a href={link.href} class="text-slate-700 font-semibold hover:text-blue-600 px-4 py-2 block">{link.label}</a>
          ) : (
            <div class="text-center">
              <span class="text-slate-800 font-bold px-4 py-2 block">{link.label}</span>
              <ul class="pl-4">
                {link.subLinks?.map(sub => (
                  <li>
                    <a href={sub.href} class="text-slate-600 hover:text-blue-600 px-4 py-2 block text-sm">- {sub.label}</a>
                  </li>
                ))}
              </ul>
            </div>
          )}
        </li>
      ))}
    </ul>
  </div>
</header>

<!-- Script para manejar la apertura/cierre del menú -->
<script>
  const btn = document.getElementById('menu-btn');
  const menu = document.getElementById('menu');

  btn?.addEventListener('click', () => {
    btn.classList.toggle('open');
    menu?.classList.toggle('hidden');
  });
</script>

<!-- Estilos para la animación del botón de hamburguesa -->
<style>
  .hamburger {
    cursor: pointer;
    width: 24px;
    height: 24px;
    transition: all 0.25s;
    position: relative;
  }

  .hamburger-top,
  .hamburger-middle,
  .hamburger-bottom {
    position: absolute;
    width: 24px;
    height: 2px;
    top: 0;
    left: 0;
    background: #334155; /* slate-700 */
    transform: rotate(0);
    transition: all 0.5s;
  }

  .hamburger-middle {
    transform: translateY(7px);
  }

  .hamburger-bottom {
    transform: translateY(14px);
  }

  .open {
    transform: rotate(90deg);
  }

  .open .hamburger-top {
    transform: rotate(45deg) translateY(6px) translateX(6px);
  }

  .open .hamburger-middle {
    display: none;
  }

  .open .hamburger-bottom {
    transform: rotate(-45deg) translateY(6px) translateX(-6px);
  }
</style>