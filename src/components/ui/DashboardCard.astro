---
interface Props {
  title: string;
  mainValue: string;
  subLabel?: string;
  footerLabel: string;
  accentClass: string;
  footerActionText?: string;
  footerActionLink?: string;
}

const {
  title,
  mainValue,
  subLabel,
  footerLabel,
  accentClass,
  footerActionText,
  footerActionLink,
} = Astro.props;

const colorVariants: { [key: string]: { accent: string; bg: string } } = {
  blue: { accent: 'border-t-blue-500', bg: 'bg-blue-500' },
  green: { accent: 'border-t-green-500', bg: 'bg-green-500' },
  yellow: { accent: 'border-t-yellow-500', bg: 'bg-yellow-500' },
  red: { accent: 'border-t-red-500', bg: 'bg-red-500' },
};

const colorKey =
  accentClass.match(/border-t-(\w+)-500/)?.[1] || 'blue';
const variants = colorVariants[colorKey];
const circleBgClass = variants.bg;
const baseBgClass = variants.bg;
---

<div class="relative group cursor-pointer">
  <div class:list={['absolute inset-0 rounded-lg', baseBgClass]}></div>

  <div
    class:list={[
      'relative flex flex-col justify-between overflow-hidden rounded-lg shadow-md bg-white text-slate-800 min-h-[220px]',
      // variants.accent, <-- LÃNEA ELIMINADA PARA QUITAR EL BORDE SUPERIOR
      'transition-all duration-300 ease-out',
      'translate-x-1 -translate-y-1',
      'group-hover:translate-x-2 group-hover:-translate-y-2 group-hover:shadow-xl',
      'border-2 border-white',
    ]}
  >
    <div class="p-6 z-10">
      <h3 class="font-semibold text-xl text-slate-700">{title}</h3>
      <div class="mt-2">
        <p
          class="text-6xl md:text-7xl font-extrabold tracking-tighter text-slate-900"
        >
          {mainValue}
        </p>
        {subLabel && <p class="text-slate-500 -mt-1">{subLabel}</p>}
      </div>
    </div>

    <div class="bg-black/75 p-3 z-10 mt-auto backdrop-blur-sm">
      <div class="flex justify-between items-center text-sm">
        <span class="text-slate-200">{footerLabel}</span>
        {
          footerActionText && (
            <div class="flex items-center gap-2">
              {footerActionLink ? (
                <a
                  href={footerActionLink}
                  class="font-medium text-white hover:opacity-80 transition-opacity hover:underline"
                >
                  {footerActionText}
                </a>
              ) : (
                <span class="font-medium text-white">{footerActionText}</span>
              )}
              <div
                class:list={[
                  'w-3 h-3 rounded-full border-2 border-white/50',
                  circleBgClass,
                ]}
              />
            </div>
          )
        }
      </div>
    </div>
  </div>
</div>